(()=>{"use strict";class t{static async displayData(){const e=t.getUnit(),n=await async function(){let e=t.getZip();void 0===e&&(e="auto:ip");const n=`https://api.weatherapi.com/v1/current.json?key=9efd72673aa64db4961180618232901&q=${e}&aqi=no`;let a=await fetch(n,{mode:"cors"}),s=await a.json();return{location:s.location,current:s.current}}();t.clearScreen(),t.setBgImage(n.current.condition.code);let a=document.createElement("div"),s=document.createElement("div"),i=document.createElement("div");const c=document.querySelector(".main-container");i.innerHTML=`\n    <h1 class="location">${n.location.name}</h1>\n    <h1 class="location region">${n.location.region}</h1>\n    `,s.innerHTML=`\n    <p class="condition">${n.current.condition.text}</p>\n    <p class="small-txt last-updated">Last Updated ${n.current.last_updated}</p>\n    `,s.classList.add("condition"),a.classList.add("weather-container"),a.classList.add("flex-column"),i.classList.add("location-container");const d=t.setPropertyUnits(e,n);t.displayTodayTemp(d,a),t.displayWeatherStats(n,d,a),t.displayWindStats(n,d,a),c.append(i),c.append(s),c.append(a),t.animateArrow(n)}static displayTodayTemp(t,e){const n=document.createElement("div"),a=document.createElement("div");n.classList.add("temperature-stats"),a.classList.add("flex-column"),n.innerHTML=`\n    <i class="fas fa-temperature-half"></i>\n    <h1 class="current-temp">${t.currentTemp}${t.temp_unit}<h1>\n    `,a.innerHTML=`\n    <p class="med-txt">FEELS LIKE</p>\n    <p class="feels-like">${t.feelsLike} ${t.temp_unit}</p>\n    `,n.append(a),e.append(n)}static displayWeatherStats(t,e,n){const a=document.createElement("div"),s=document.createElement("div"),i=document.createElement("div"),c=document.createElement("div");a.classList.add("weather-stats-container"),s.classList.add("weather-data"),i.classList.add("weather-data"),c.classList.add("weather-data"),s.innerHTML=`\n    <p class="weather-data-header">HUMIDITY</p>\n    <p class="weather-data-value">${t.current.humidity}%</p>\n    `,i.innerHTML=`\n    <p class="weather-data-header">UV INDEX</p>\n    <p class="weather-data-value">${t.current.uv}</p>\n    `,c.innerHTML=`\n    <p class="weather-data-header">PRECIP.</p>\n    <p class="weather-data-value">${e.precip} <span class="small-txt">${e.precip_unit}</span></p>\n    `,a.append(s),a.append(i),a.append(c),n.append(a)}static displayWindStats(t,e,n){const a=document.createElement("div"),s=document.createElement("div"),i=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div");a.classList.add("wind-main-container"),a.classList.add("flex-column"),s.classList.add("wind-data-container"),i.classList.add("wind-data"),c.classList.add("wind-data"),d.classList.add("wind-data"),a.innerHTML='<p class="weather-data-header">WIND</p>',c.innerHTML=`\n    <p class="wind-data-header">DIRECTION</p>\n    <p class="wind-data-value"><span><i class="fas fa-arrow-up"></i></span>${t.current.wind_dir}</p>\n    `,i.innerHTML=`\n    <p class="wind-data-header">SPEED</p>\n    <p class="wind-data-value">${e.currentWind} <span class="small-txt">${e.wind_unit}</span></p>\n    `,d.innerHTML=`\n    <p class="wind-data-header">GUST</p>\n    <p class="wind-data-value">${e.gust} <span class="small-txt">${e.wind_unit}</span></p>\n    `,s.append(c),s.append(i),s.append(d),a.append(s),n.append(a)}static getZip(){return document.body.dataset?document.body.dataset.lastZip:document.getElementById("Zip").textContent}static clearInput(){let t=document.getElementById("Zip"),e=document.querySelector(".fa-check");t.value="",e.classList.remove("active")}static setEventListeners(){let e=document.querySelector(".submit"),n=document.getElementById("Zip");document.getElementById("myToggle").addEventListener("change",t.changeUnit),n.addEventListener("keypress",(t=>{"Enter"===t.key&&e.click()})),n.addEventListener("keydown",t.showSubmitBtn)}static clearScreen(){document.querySelector(".main-container").innerHTML=""}static showSubmitBtn(){let e=document.querySelector(".submit");e.classList.add("active"),e.addEventListener("click",t.submitBtnAction)}static submitBtnAction(){const e=document.getElementById("Zip"),n=document.getElementById("unit").textContent;document.body.setAttribute("data-last-zip",e.value),t.clearInput(),t.hideSubmitBtn(),t.displayData(n)}static hideSubmitBtn(){document.querySelector(".submit").classList.remove("active")}static getUnit(){return document.getElementById("unit").textContent}static setPropertyUnits(t,e){return"F"==t?{temp_unit:t,wind_unit:"mph",precip_unit:"in",feelsLike:e.current.feelslike_f,gust:e.current.gust_mph,precip:e.current.precip_in,currentTemp:e.current.temp_f,currentWind:e.current.wind_mph}:{temp_unit:"C",wind_unit:"kph",precip_unit:"mm",feelsLike:e.current.feelslike_c,gust:e.current.gust_kph,precip:e.current.precip_mm,currentTemp:e.current.temp_c,currentWind:e.current.wind_kph}}static changeUnit(){const e=document.getElementById("myToggle"),n=document.getElementById("unit");e.checked?(n.textContent="C",t.displayData(n)):(n.textContent="F",t.displayData(n))}static animateArrow(t){const e=document.querySelector(".fa-arrow-up"),n=t.current.wind_degree;e.style.transform=`rotate(${n}deg)`}static getTimeHour(){return(new Date).getHours()}static setBgImage(e){const n="./assets/imgs/rain-night.jpg";let a=t.checkDayOrNight(),s=t.getWeatherCondition(e);const i=document.getElementById("Background1");if("day"==a){let t="",e=document.getElementById("Background2");return e.classList.remove("hidden"),"clear"==s&&(t+="./assets/imgs/sun.jpg"),"partly-cloudy"==s&&(t+="./assets/imgs/partly-cloudy-day.jpg"),"overcast"==s&&(t+="./assets/imgs/overcast.jpg"),"blizzard"==s&&(t+="./assets/imgs/blizzard.jpg"),"light-rain"==s&&(t+="./assets/imgs/light-rain.jpg"),"rain"==s&&(t+="./assets/imgs/rain.jpg"),"thunderstorm"==s&&(t+="./assets/imgs/thunderstorm.jpg"),"snow"==s&&(t+="./assets/imgs/snow.jpg"),"fog"==s&&(t+="./assets/imgs/fog.jpg"),e.src=t,i.classList.add("hidden"),t}if("night"==a){let t="";return"clear"==s&&(t+="./assets/imgs/clear-night.jpg"),"partly-cloudy"==s&&(t+="./assets/imgs/partly-cloudy-night.jpg"),"overcast"==s&&(t+="./assets/imgs/overcast-night.jpg"),"blizzard"==s&&(t+="./assets/imgs/blizzard-night.jpg"),"light-rain"==s&&(t+=n),"rain"==s&&(t+=n),"thunderstorm"==s&&(t+=n),"snow"==s&&(t+="./assets/imgs/snow-night.jpg"),"fog"==s&&(t+="./assets/imgs/night-fog.jpg"),document.getElementById("Background").src=t,i.classList.add("hidden"),t}{let t=document.getElementById("Background");console.log("default image"),t.src="./assets/imgs/default.jpg"}}static getWeatherCondition(t){const e={1e3:"clear",1003:"partly-cloudy",1009:"overcast",1117:"blizzard"};return t in e?e[t]:[1063,1069,1072,1150,1153,1168,1171,1180,1183,1198,1204,1240,1249].includes(t)?"light-rain":[1186,1189,1192,1195,1201,1207,1243,1246,1252].includes(t)?"rain":[1087,1273,1276].includes(t)?"thunderstorm":[1066,1114,1210,1213,1216,1219,1222,1225,1237,1255,1258,1261,1264].includes(t)?"snow":[1030,1135,1147].includes(t)?"fog":void 0}static checkDayOrNight(){const e=t.getTimeHour();return[6,7,8,9,10,11,12,13,14,15,16,17].includes(e)?"day":"night"}}t.clearInput(),t.setEventListeners(),t.changeUnit()})();