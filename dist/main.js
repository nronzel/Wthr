(()=>{"use strict";class t{static async displayData(){const e=t.getUnit(),a=await async function(){const e=`https://api.weatherapi.com/v1/current.json?key=9efd72673aa64db4961180618232901&q=${t.getLocation()}&aqi=no`;let a=await fetch(e,{mode:"cors"}),n=await a.json();return{location:n.location,current:n.current}}(),n=await t.getDailyForecast();t.displayDailyData(n),t.clearScreen(),t.setBgImage(a.current.condition.code);let s=document.createElement("div"),i=document.createElement("div"),d=document.createElement("div");const c=document.querySelector(".main-container");d.innerHTML=`\n    <h1 class="location">${a.location.name}</h1>\n    <h1 class="location region">${a.location.region}</h1>\n    `,i.innerHTML=`\n    <p class="condition">${a.current.condition.text}</p>\n    <p class="small-txt last-updated">Last Updated ${a.current.last_updated}</p>\n    `,i.classList.add("condition"),s.classList.add("weather-container"),s.classList.add("flex-column"),d.classList.add("location-container");const r=t.setPropertyUnits(e,a);t.#t(r,s),t.displayWeatherStats(a,r,s),t.displayWindStats(a,r,s),c.append(d),c.append(i),c.append(s),t.animateArrow(a)}static displayDailyData(e){document.querySelector(".secondary-container").innerHTML="",e.forEach((e=>t.drawDailyCard(e)))}static drawDailyCard(t){const e=document.querySelector(".secondary-container"),a=document.createElement("div");a.classList.add("daily-container","glassify"),a.innerHTML=`\n    <p class="weather-data-header date">${t.date}</p>\n    <div class="daily-header">\n      <img class="wicon" src="https:${t.icon}" alt="weather-icon">\n      <p class="weather-data-header midweight">${t.condition}</p>\n    </div>\n    <div class="daily-data-container">\n      <p class="daily-data-header">Temp</p>\n      <p class="daily-data"><span class="small-txt">${t.unit}</span> ${t.temp}</p>\n      <p class="daily-data-header">Wind</p>\n      <p class="daily-data"><span class="small-txt">${t.windUnit}</span> ${t.wind}</p>\n      <p class="daily-data-header">Rain</p>\n      <p class="daily-data"><span class="small-txt">%</span> ${t.rain}</p>\n      <p class="daily-data-header">Humidity</p>\n      <p class="daily-data"><span class="small-txt">%</span> ${t.humidity}</p>\n      <p class="daily-data-header">Sunrise</p>\n      <p class="daily-data"><span class="small-txt">AM</span> ${t.sunrise.split(" ")[0]}</p>\n      <p class="daily-data-header">Sunset</p>\n      <p class="daily-data"><span class="small-txt">PM</span> ${t.sunset.split(" ")[0]}</p>\n    </div>\n    `,e.append(a)}static async getDailyForecast(){const e=await async function(){const e=`https://api.weatherapi.com/v1/forecast.json?key=9efd72673aa64db4961180618232901&q=${t.getLocation()}&days=4&aqi=no`,a=await fetch(e,{mode:"cors"});return(await a.json()).forecast}(),a=e.forecastday.slice(1),n=[];return console.log(e),a.forEach((e=>n.push(t.#e(e)))),n}static#e(e){const a=e.day,n=t.getUnit();return{date:`${e.date.split("-")[1]}/${e.date.split("-")[2]}`,condition:a.condition.text,temp:"F"===n?a.avgtemp_f:a.avgtemp_c,wind:"F"===n?a.maxwind_mph:a.maxwind_kph,rain:a.daily_chance_of_rain,humidity:a.avghumidity,sunrise:e.astro.sunrise,sunset:e.astro.sunset,icon:a.condition.icon,unit:n,windUnit:"F"===n?"mph":"kph"}}static#t(t,e){const a=document.createElement("div"),n=document.createElement("div");a.classList.add("temperature-stats"),n.classList.add("flex-column"),a.innerHTML=`\n    <i class="fas fa-temperature-half"></i>\n    <h1 class="current-temp">${t.currentTemp}${t.temp_unit}<h1>\n    `,n.innerHTML=`\n    <p class="med-txt">FEELS LIKE</p>\n    <p class="feels-like">${t.feelsLike} ${t.temp_unit}</p>\n    `,a.append(n),e.append(a)}static displayWeatherStats(t,e,a){const n=document.createElement("div"),s=document.createElement("div"),i=document.createElement("div"),d=document.createElement("div");n.classList.add("weather-stats-container"),s.classList.add("weather-data"),i.classList.add("weather-data"),d.classList.add("weather-data"),s.innerHTML=`\n    <p class="weather-data-header">HUMIDITY</p>\n    <p class="weather-data-value">${t.current.humidity}%</p>\n    `,i.innerHTML=`\n    <p class="weather-data-header">UV INDEX</p>\n    <p class="weather-data-value">${t.current.uv}</p>\n    `,d.innerHTML=`\n    <p class="weather-data-header">PRECIP.</p>\n    <p class="weather-data-value">${e.precip} <span class="small-txt">${e.precip_unit}</span></p>\n    `,n.append(s),n.append(i),n.append(d),a.append(n)}static displayWindStats(t,e,a){const n=document.createElement("div"),s=document.createElement("div"),i=document.createElement("div"),d=document.createElement("div"),c=document.createElement("div");n.classList.add("wind-main-container"),n.classList.add("flex-column"),s.classList.add("wind-data-container"),i.classList.add("wind-data"),d.classList.add("wind-data"),c.classList.add("wind-data"),n.innerHTML='<p class="weather-data-header">WIND</p>',d.innerHTML=`\n    <p class="wind-data-header">DIRECTION</p>\n    <p class="wind-data-value"><span><i class="fas fa-arrow-up"></i></span>${t.current.wind_dir}</p>\n    `,i.innerHTML=`\n    <p class="wind-data-header">SPEED</p>\n    <p class="wind-data-value">${e.currentWind} <span class="small-txt">${e.wind_unit}</span></p>\n    `,c.innerHTML=`\n    <p class="wind-data-header">GUST</p>\n    <p class="wind-data-value">${e.gust} <span class="small-txt">${e.wind_unit}</span></p>\n    `,s.append(d),s.append(i),s.append(c),n.append(s),a.append(n)}static getLocation(){let t=document.getElementById("Zip");return void 0!==document.body.dataset.lastZip?document.body.dataset.lastZip:""!==t.value?t.textContent:"auto:ip"}static clearInput(){let t=document.getElementById("Zip"),e=document.querySelector(".fa-check");t.value="",e.classList.remove("active")}static setEventListeners(){document.querySelector(".submit");let e=document.getElementById("Zip");document.getElementById("myToggle").addEventListener("change",t.changeUnit),e.addEventListener("keypress",(e=>{"Enter"===e.key&&t.sub})),e.addEventListener("keydown",t.showSubmitBtn)}static clearScreen(){document.querySelector(".main-container").innerHTML=""}static showSubmitBtn(){let e=document.querySelector(".submit");e.classList.add("active"),e.addEventListener("click",t.submitBtnAction)}static submitBtnAction(){const e=document.getElementById("Zip");document.body.setAttribute("data-last-zip",e.value),t.clearInput(),t.hideSubmitBtn(),t.displayData()}static hideSubmitBtn(){document.querySelector(".submit").classList.remove("active")}static getUnit(){return document.getElementById("unit").textContent}static setPropertyUnits(t,e){return"F"==t?{temp_unit:t,wind_unit:"mph",precip_unit:"in",feelsLike:e.current.feelslike_f,gust:e.current.gust_mph,precip:e.current.precip_in,currentTemp:e.current.temp_f,currentWind:e.current.wind_mph}:{temp_unit:"C",wind_unit:"kph",precip_unit:"mm",feelsLike:e.current.feelslike_c,gust:e.current.gust_kph,precip:e.current.precip_mm,currentTemp:e.current.temp_c,currentWind:e.current.wind_kph}}static changeUnit(){const e=document.getElementById("myToggle"),a=document.getElementById("unit");e.checked?(a.textContent="C",t.displayData(a)):(a.textContent="F",t.displayData(a))}static animateArrow(t){const e=document.querySelector(".fa-arrow-up"),a=t.current.wind_degree;e.style.transform=`rotate(${a}deg)`}static getTimeHour(){return(new Date).getHours()}static setBgImage(e){const a="./assets/imgs/rain-night.jpg";let n=t.checkDayOrNight(),s=t.getWeatherCondition(e);const i=document.getElementById("Background1");if("day"===n){let t="",e=document.getElementById("Background2");return e.classList.remove("hidden"),"clear"==s&&(t+="./assets/imgs/sun.jpg"),"partly-cloudy"==s&&(t+="./assets/imgs/partly-cloudy-day.jpg"),"overcast"==s&&(t+="./assets/imgs/overcast.jpg"),"blizzard"==s&&(t+="./assets/imgs/blizzard.jpg"),"light-rain"==s&&(t+="./assets/imgs/light-rain.jpg"),"rain"==s&&(t+="./assets/imgs/rain.jpg"),"thunderstorm"==s&&(t+="./assets/imgs/thunderstorm.jpg"),"snow"==s&&(t+="./assets/imgs/snow.jpg"),"fog"==s&&(t+="./assets/imgs/fog.jpg"),e.src=t,i.classList.add("hidden"),t}if("night"==n){let t="";return"clear"==s&&(t+="./assets/imgs/clear-night.jpg"),"partly-cloudy"==s&&(t+="./assets/imgs/partly-cloudy-night.jpg"),"overcast"==s&&(t+="./assets/imgs/overcast-night.jpg"),"blizzard"==s&&(t+="./assets/imgs/blizzard-night.jpg"),"light-rain"==s&&(t+=a),"rain"==s&&(t+=a),"thunderstorm"==s&&(t+=a),"snow"==s&&(t+="./assets/imgs/snow-night.jpg"),"fog"==s&&(t+="./assets/imgs/night-fog.jpg"),document.getElementById("Background2").src=t,i.classList.add("hidden"),t}{let t=document.getElementById("Background");console.log("default image"),t.src="./assets/imgs/default.jpg"}}static getWeatherCondition(t){const e={1e3:"clear",1003:"partly-cloudy",1009:"overcast",1117:"blizzard"};return t in e?e[t]:[1063,1069,1072,1150,1153,1168,1171,1180,1183,1198,1204,1240,1249].includes(t)?"light-rain":[1186,1189,1192,1195,1201,1207,1243,1246,1252].includes(t)?"rain":[1087,1273,1276].includes(t)?"thunderstorm":[1066,1114,1210,1213,1216,1219,1222,1225,1237,1255,1258,1261,1264].includes(t)?"snow":[1030,1135,1147].includes(t)?"fog":void 0}static checkDayOrNight(){const e=t.getTimeHour();return[6,7,8,9,10,11,12,13,14,15,16,17].includes(e)?"day":"night"}}t.clearInput(),t.setEventListeners(),t.changeUnit()})();